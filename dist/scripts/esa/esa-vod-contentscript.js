"use strict";function retrieveGameTitleList(){$("tr.border-top:not(.row2) td.center-sm").each(function(){gameArray.push($(this).text())})}function loadHighlightStorage(){null==localStorage.getItem("esa16scheduleHighlights")?(localStorage.setItem("esa16scheduleHighlights",JSON.stringify({})),storageObj=JSON.parse(localStorage.getItem("esa16scheduleHighlights"))):(storageObj=JSON.parse(localStorage.getItem("esa16scheduleHighlights")),chrome.storage.sync.set({esa16scheduleHighlights:storageObj},function(){console.log("Schedule highlights saved to sync storage")}))}function addHighlights(){$(".schedulenote").after('<div class="panel panel-body center" id="star-highlight-notice" style="font-size: 16px;">Clicking the <i class="fa fa-star-o"></i> beside the run will highlight it!<br >Use this to keep track of runs you want to watch.</h4>'),$("tr.border-top:not(.row2) td:nth-child(1)").each(function(e){$(this).html('<input type="checkbox" class="highlight-run" name="checkbox" id="theater-mode'+e+'"> <label for="theater-mode'+e+'">'+$(this).text()+"</label>");var t=$(this);$("#theater-mode"+e).change(function(){if($(this).is(":checked")){t.parent().css("background-color","#444");var e=getGameTitleString(t.next("td").text());storageObj[e]=!0,chrome.storage.sync.set({esa16scheduleHighlights:storageObj},function(e){console.log("Schedule highlights updated and saved to sync storage")}),localStorage.setItem("esa16scheduleHighlights",JSON.stringify(storageObj)),console.log("Starred and highlighted "+e+" on the schedule")}else{t.parent().css("background-color","transparent");var e=getGameTitleString(t.next("td").text());storageObj[e]=!1,localStorage.setItem("esa16scheduleHighlights",JSON.stringify(storageObj)),chrome.storage.sync.set({esa16scheduleHighlights:storageObj},function(){console.log("Schedule highlights updated")}),console.log("Removed the star and highlight for "+e+" on the schedule")}}),1==storageObj[t.next("td").text()]&&$("#theater-mode"+e).prop("checked",!0).change()})}function addSpeedrunLinks(){$(".visible-xs").remove(),$.getJSON("https://gist.githubusercontent.com/theoriginalcamper/cde736fb9e43b34cf8f49c0c82d7c564/raw/esa_schedule2016.json").done(function(e){var t=e;$("tr.border-top:not(.row2) td.center-sm:not(:has(a))").each(function(){var e=$(this).text();console.log(e),null!=t[e].link&&(console.log(e),$(this).html('<a href="'+t[e].link+'">'+e+"</a>"))}),$("tr.border-top:not(.row2) td.center-sm:contains(Mega Man)").each(function(){var e=$(this).text();null!=t[e].link&&(console.log(e),$(this).html('<a href="'+t[e].link+'">'+e+"</a>"))})})}function getGameTitleString(e){if(e.includes("COMPLETED"))var t=e.split(" - ")[0];else var t=e;return t}function addVodLinks(){$.getJSON("https://gist.githubusercontent.com/theoriginalcamper/7ee2ff2401968aff754c7e045abbb14b/raw/esa2016-vod.json").done(function(e){console.log(e);var t=_.keys(e);console.log(t),$.each(t,function(t,o){var a=generateVodString(o,e);$("tr.border-top:not(.row2) td.center-sm").filter(function(e){return $(this).text()==o}).append(a)}),console.log("Done")})}function generateVodString(e,t){var o="https://www.twitch.tv/esamarathon/v/"+t[e]["video-link"]+"?t="+t[e].time;if("undefined"!=typeof t[e].youtube){var a=t[e].youtube;return' - <i class="fa fa-check"></i> COMPLETED <a href="'+o+'" class="vod-link"><i class="fa fa-twitch"></i></a> <a href="'+a+'" class="vod-link"><i class="fa fa-youtube-play"></i></a>'}return' - <i class="fa fa-check"></i> COMPLETED <a href="'+o+'" class="vod-link"><i class="fa fa-twitch"></i></a>'}var gameArray=[],storageObj=null;$(document).ready(function(){retrieveGameTitleList(),loadHighlightStorage(),addHighlights(),addSpeedrunLinks(),addVodLinks()});
//# sourceMappingURL=esa-vod-contentscript.js.map

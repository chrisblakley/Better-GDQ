{"version":3,"sources":["scripts/discord-contentscript.js"],"names":["runners_paragraph","document","createElement","game_link_container","game_link_a","id","className","$","ready","addTwitchSwitch","html","append","bootstrapSwitch","addInformationBar","before","width","outerHeight","headerHeight","css","on","port","postMessage","message","updateTwitchPlayer","msg","console","log","hasClass","userListStatus","click","twitchActive","updateDiscordUI","height","remove","parent","next","margin-right","margin-left","removeAttr","updateGDQHeaderUI","generateFormattedRunnerString","runner","attr","link","category","game","updateCalendarUI","empty","scheduleString","_","each","order","gameTitle","index","generateScheduleItemString","schedule","runners","location","runners_keys","keys","runner_string","length","last_runner","pop","second_runner","runner_key","generateRunnerElement","runnerObject","scheduleItemObject","runnerString","titleString","title","scheduleItemString","estimate","requestDataFromBackground","refreshDataFromBackground","styleNode","type","textContent","chrome","extension","getURL","head","appendChild","linkNode","href","checkLinks","setInterval","clearInterval","event","state","checkRefresh","this","that","setTimeout","checkForActiveGuild","has","uiUpdate","text","runtime","connect","name","onMessage","addListener","status","calendar"],"mappings":"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","file":"scripts/discord-contentscript.js","sourcesContent":["'use strict';\n\nvar runners_paragraph = document.createElement('div');\nvar game_link_container = document.createElement('div');\nvar game_link_a = document.createElement('a');\n\nrunners_paragraph.id = \"gdq-runners-information\";\ngame_link_container.id = \"gdq-link-container\";\ngame_link_a.id = \"gdq-speedrun-link\";\ngame_link_a.className = \"speedrun-link\";\n\n$(document).ready(function () {\n\tconsole.log(\"Hello Discord!\");\n\n\tconsole.log($('.messages-wrapper'));\n\n\tvar userListStatus = null;\n\tvar twitchActive = false;\n\tvar headerHeight = null;\n\n\tvar styleNode = document.createElement(\"style\");\n\tstyleNode.type = \"text/css\";\n\tstyleNode.textContent = '@font-face { font-family: FontAwesome; src: url(' + chrome.extension.getURL(\"/fonts/fontawesome-webfont.woff\") + ');}';\n\tdocument.head.appendChild(styleNode);\n\n\tvar linkNode = document.createElement(\"link\");\n\tlinkNode.type = \"text/css\";\n\tlinkNode.href = \"http://yui.yahooapis.com/pure/0.6.0/pure-min.css\";\n\tdocument.head.appendChild(linkNode);\n\n\tvar checkLinks = setInterval(function () {\n\t\tif ($(\".topic\").length > 0) {\n\t\t\t// Check if element has been found\n\t\t\tconsole.log('Add Switch to Links Panel');\n\t\t\taddTwitchSwitch();\n\t\t\taddInformationBar();\n\t\t\tclearInterval(checkLinks);\n\n\t\t\t$('input[name=\"twitch-player-display\"]').on('switchChange.bootstrapSwitch', function (event, state) {\n\t\t\t\tconsole.log('Clicked Twitch Switch.');\n\t\t\t\tconsole.log($(\"[name='twitch-player-display']\").bootstrapSwitch('state'));\n\t\t\t\tif ($('input[name=\"twitch-player-display\"]').bootstrapSwitch('state')) {\n\t\t\t\t\tupdateTwitchPlayer('add');\n\t\t\t\t} else {\n\t\t\t\t\tupdateTwitchPlayer('remove');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, 1000);\n\n\tvar checkRefresh = setInterval(function () {\n\t\tif ($(\".fa-refresh\").length > 0) {\n\t\t\t// Check if element has been found\n\t\t\t$(\".fa.fa-refresh\").click(function () {\n\t\t\t\tthis.className = 'fa fa-refresh fa-spin';\n\t\t\t\tconsole.log(\"Refreshing...\");\n\t\t\t\trefreshDataFromBackground();\n\t\t\t\tvar that = this;\n\t\t\t\tconsole.log(that);\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tthat.className = 'fa fa-refresh';\n\t\t\t\t\tconsole.log(\"Refresh complete.\");\n\t\t\t\t}, 2000);\n\t\t\t});\n\t\t\tclearInterval(checkRefresh);\n\t\t}\n\t}, 1000);\n\n\tfunction addTwitchSwitch() {\n\t\t$('.links').html('<div id=\"twitch-switch\"><label for=\"twitch-player-display\" id=\"twitch-player-display-label\">Twitch Player Embed</label></div>');\n\t\t$('#twitch-switch').append('<input type=\"checkbox\" data-size=\"mini\" name=\"twitch-player-display\">');\n\n\t\t$(\"[name='twitch-player-display']\").bootstrapSwitch();\n\t}\n\n\tfunction addInformationBar() {\n\n\t\t$('.app').before('\\n\\t\\t\\t\\t\\t\\t\\t<header id=\"gdq-header\" style=\"width: ' + ($('.title-wrap').width() - $('.header-toolbar').width() + 30) + 'px; height: ' + ($('.title-wrap').outerHeight() - 1) + 'px; overflow: hidden; min-height: 48px; position: fixed; top: 0px; left: ' + ($('.guilds-wrapper').width() + $('.channels-wrap').width()) + 'px;\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\"extension-container\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div id=\"options\" style=\"transform: translateY(50%);\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-calendar collapsed\" data-toggle=\"collapse\" data-target=\"#collapseCalendar\" aria-expanded=\"false\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-refresh\" id=\"settings-icon\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\"game-information\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div style=\"clear:both;\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\"collapse\" id=\"collapseCalendar\" style=\"padding-top: 10px; height: 0px;\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- Schedule -->\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><i class=\"fa fa-calendar\" style=\"margin-right: 10px;\"></i> Next Runs</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\"table\" id=\"schedule-table\" style=\"border-collapse: collapse;\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</header>\\n\\t\\t\\t');\n\n\t\theaderHeight = $('#gdq-header').css('height');\n\n\t\t$('.header-toolbar').css('margin-left', '0px');\n\t\t$('.game-information').append(game_link_container);\n\t\t$('#gdq-link-container').html('<b>Current Game: </b>');\n\t\t$('#gdq-link-container').append(game_link_a);\n\t\t$('.game-information').append(runners_paragraph);\n\n\t\t$('#collapseCalendar').on('show.bs.collapse', function () {\n\t\t\t$('#gdq-header').css('height', 'auto');\n\t\t});\n\n\t\t$('#collapseCalendar').on('hide.bs.collapse', function () {\n\t\t\t$('#gdq-header').css('height', headerHeight);\n\t\t});\n\n\t\tport.postMessage({ message: \"refresh\" });\n\t}\n\n\tfunction updateTwitchPlayer(msg) {\n\t\tif (msg == 'add') {\n\t\t\tconsole.log('Switch is on. Adding Twitch iframe and modifying UI.');\n\n\t\t\tif ($('.header-toolbar button:nth-child(2)').hasClass('active')) {\n\t\t\t\tuserListStatus = true;\n\t\t\t\t$('.header-toolbar button:nth-child(2)').click();\n\t\t\t} else {\n\t\t\t\tuserListStatus = false;\n\t\t\t}\n\n\t\t\t$('button.active').click();\n\n\t\t\ttwitchActive = true;\n\n\t\t\tupdateDiscordUI('add');\n\n\t\t\t$('.app').before('<div id=\"twitch-container\" style=\"width: ' + ($(document).width() - $('.guilds-wrapper').width() - $('.messages-wrapper').width()) + 'px; height: ' + ($(document).height() - $('.title-wrap').outerHeight() - $('.links').outerHeight()) + 'px; position: fixed; z-index:100; top: ' + $('.title-wrap').outerHeight() + 'px; left: ' + $('.guilds-wrapper').width() + 'px;\"><iframe id=\"twitch-embed\" src=\"https://player.twitch.tv/?channel=gamesdonequick\" width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"no\" allowFullscreen=\"true\" class=\"center-block\"></iframe></div>');\n\t\t} else if (msg == 'remove') {\n\t\t\tconsole.log('Switch is off. Removing Twitch iframe and UI changes.');\n\t\t\t$('#twitch-container').remove();\n\t\t\ttwitchActive = false;\n\t\t\tupdateDiscordUI('remove');\n\n\t\t\tif (userListStatus == true) {\n\t\t\t\t$('.header-toolbar button:nth-child(2)').click();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateDiscordUI(msg) {\n\t\tconsole.log(\"TwitchActive: \" + twitchActive);\n\t\tif (msg == 'add') {\n\t\t\tconsole.log(\"Rearranging Discord UI\");\n\t\t\t$('.messages-wrapper').parent().css('align-items', 'flex-end');\n\t\t\t$('.messages-wrapper').css('width', '48%');\n\t\t\t$('.messages-wrapper').next('form').css({ 'width': '46%', 'margin-right': '2%', 'margin-left': '0px' });\n\t\t} else if (msg == 'remove') {\n\t\t\tconsole.log(\"Discord UI returned to normal\");\n\t\t\t$('.messages-wrapper').parent().removeAttr('style');\n\t\t\t$('.messages-wrapper').removeAttr('style');\n\t\t\t$('.messages-wrapper').next('form').removeAttr('style');\n\t\t}\n\t}\n\n\tfunction updateGDQHeaderUI(msg) {\n\t\t$('#gdq-runners-information').html(generateFormattedRunnerString(msg.runner, 'header'));\n\t\t$('#gdq-speedrun-link').attr('href', msg.link);\n\n\t\tif (msg.category != null) {\n\t\t\t$('#gdq-speedrun-link').html(msg.game + ' (' + msg.category + ')');\n\t\t} else {\n\t\t\t$('#gdq-speedrun-link').html('' + msg.game);\n\t\t}\n\t}\n\n\tfunction updateCalendarUI(msg) {\n\t\tconsole.log(\"Calendar updating...\");\n\t\tconsole.log(msg);\n\t\tif (msg != null) {\n\t\t\t$('#schedule-table tbody').empty();\n\n\t\t\tvar scheduleString = \"\";\n\t\t\t_.each(msg.order, function (gameTitle, index) {\n\t\t\t\tscheduleString += generateScheduleItemString(msg.schedule[gameTitle], index + 1);\n\t\t\t});\n\n\t\t\t$('#schedule-table tbody').html(scheduleString);\n\t\t\tconsole.log(\"Calendar updated.\");\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tfunction generateFormattedRunnerString(runners, location) {\n\t\tvar runners_keys = _.keys(runners);\n\t\tvar runner_string = \"by \";\n\t\tif (runners_keys.length > 2) {\n\t\t\tif (location != 'table') {\n\t\t\t\trunner_string = \"<b>Current Runners: </b>\";\n\t\t\t}\n\t\t\tvar last_runner = runners_keys.pop();\n\t\t\tvar second_runner = runners_keys.pop();\n\t\t\t$.each(runners_keys, function (index, runner_key) {\n\t\t\t\trunner_string += generateRunnerElement(runners, runner_key) + ', ';\n\t\t\t});\n\n\t\t\trunner_string += generateRunnerElement(runners, second_runner) + ' ';\n\t\t\trunner_string += 'and ';\n\t\t\trunner_string += generateRunnerElement(runners, last_runner);\n\t\t} else if (runners_keys.length == 2) {\n\t\t\tif (location != 'table') {\n\t\t\t\trunner_string = \"<b>Current Runners: </b>\";\n\t\t\t}\n\t\t\tvar last_runner = runners_keys.pop();\n\t\t\tvar second_runner = runners_keys.pop();\n\n\t\t\trunner_string += generateRunnerElement(runners, second_runner);\n\t\t\trunner_string += ' and ';\n\t\t\trunner_string += generateRunnerElement(runners, last_runner);\n\t\t} else if (runners_keys.length == 1) {\n\t\t\tif (location != 'table') {\n\t\t\t\trunner_string = \"<b>Current Runner: </b>\";\n\t\t\t}\n\t\t\tvar runner_key = runners_keys[0];\n\t\t\trunner_string += generateRunnerElement(runners, runners_keys[0]);\n\t\t} else {\n\t\t\tconsole.log(\"Error no runners.\");\n\t\t\trunner_string = \"\";\n\t\t}\n\t\treturn runner_string;\n\t}\n\n\tfunction generateRunnerElement(runnerObject, runner_key) {\n\t\tif (runnerObject[runner_key][\"logo\"] == null) {\n\t\t\treturn '<a href=\"' + runnerObject[runner_key][\"link\"] + '\" onclick=\"window.open(this.href); return false;\">' + runner_key + '</a>';\n\t\t} else {\n\t\t\treturn '<a href=\"' + runnerObject[runner_key][\"link\"] + '\" onclick=\"window.open(this.href); return false;\"><img class=\"runner-logo\" src=\"' + runnerObject[runner_key][\"logo\"] + '\" style=\"width: 14px;\"/>' + runner_key + '</a>';\n\t\t}\n\t}\n\n\tfunction generateScheduleItemString(scheduleItemObject, index) {\n\t\tvar runnerString = generateFormattedRunnerString(scheduleItemObject.runner, 'table');\n\t\tif (scheduleItemObject.category != null) {\n\t\t\tvar titleString = scheduleItemObject.title + ' (' + scheduleItemObject.category + ')';\n\t\t} else {\n\t\t\tvar titleString = scheduleItemObject.title;\n\t\t}\n\n\t\tvar scheduleItemString = '<tr>\\n\\t                                <th scope=\"row\">' + index + '</th>\\n\\t                                <td>\\n\\t                                    <a class=\"speedrun-link\" id=\"next-game-title\" href=\"' + scheduleItemObject.link + '\" onclick=\"window.open(this.href); return false;\"> ' + titleString + '</a>\\n\\t                                    <p class=\"runners-links\" id=\"next-runners-information\">' + runnerString + '</p>\\n\\t                                </td>\\n\\t                                <td>\\n\\t                                    <p class=\"text-right\"><i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i> ' + scheduleItemObject.estimate + '</p>\\n\\t                                </td>\\n\\t                              </tr>';\n\n\t\treturn scheduleItemString;\n\t}\n\n\tvar checkForActiveGuild = setInterval(function () {\n\t\tif ($(\".selected\").length > 0) {\n\t\t\t// Check if element has been found\n\t\t\t$('.guild').on('click', function () {\n\t\t\t\tif (twitchActive) {\n\t\t\t\t\tif ($(this).has('a[href=\"/channels/140605087511740416/140605087511740416\"]').length > 0) {\n\t\t\t\t\t\t$('#twitch-container').css('display', '');\n\t\t\t\t\t\tvar uiUpdate = setInterval(function () {\n\t\t\t\t\t\t\tif ($('.guild-header').length > 0 && $('.guild-header header span').text() == 'GamesDoneQuick') {\n\n\t\t\t\t\t\t\t\tupdateDiscordUI('add');\n\t\t\t\t\t\t\t\tclearInterval(uiUpdate);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('#twitch-container').css('display', 'none');\n\t\t\t\t\t\tupdateDiscordUI('remove');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tclearInterval(checkForActiveGuild);\n\t\t}\n\t}, 1000);\n\n\tvar port = chrome.runtime.connect({ name: \"gdq\" });\n\tport.postMessage({ message: \"request\" });\n\tport.onMessage.addListener(function (msg) {\n\t\tif (msg.status == \"changed\") {\n\t\t\tconsole.log(msg);\n\t\t\tconsole.log(\"The Current Game is: \" + msg.game);\n\n\t\t\tif ($('#gdq-header').length > 0) {\n\t\t\t\tupdateGDQHeaderUI(msg);\n\t\t\t\tupdateCalendarUI(msg.calendar);\n\t\t\t}\n\t\t} else if (msg.status == \"unchanged\") {\n\t\t\tconsole.log(\"Current game has not changed since last request\");\n\t\t} else if (msg.status == \"reload\") {\n\t\t\tconsole.log(\"Reload has occurred\");\n\t\t\tconsole.log(msg);\n\t\t\tconsole.log(\"The Current Game is: \" + msg.game);\n\t\t\tif ($('#gdq-header').length > 0) {\n\t\t\t\tupdateGDQHeaderUI(msg);\n\t\t\t\tupdateCalendarUI(msg.calendar);\n\t\t\t}\n\t\t}\n\t});\n\tfunction requestDataFromBackground() {\n\t\tport.postMessage({ message: \"request\" });\n\t}\n\tfunction refreshDataFromBackground() {\n\t\tport.postMessage({ message: \"refresh\" });\n\t}\n\tsetInterval(requestDataFromBackground, 300000);\n});"],"sourceRoot":"/source/"}
{"version":3,"sources":["scripts/contentscript.js"],"names":["updateUI","msg","runners_paragraph","innerHTML","generateFormattedRunnerString","runner","game_link_a","href","link","onclick","window","open","this","category","game","updateCalendarUI","console","log","$","empty","scheduleString","_","each","order","gameTitle","index","generateScheduleItemString","schedule","html","runners","runners_keys","keys","runner_string","length","last_runner","pop","second_runner","runner_key","generateRunnerElement","runnerObject","scheduleItemObject","runnerString","titleString","title","scheduleItemString","estimate","calculateRefreshRate","minutes","milliseconds","updateRefreshRate","newRate","notify","icon","message","element","position","type","allow_dismiss","newest_on_top","showProgressbar","placement","from","align","parseInt","clearInterval","refreshTimer","setInterval","requestDataFromBackground","sendUpdateCalendarItemsNumber","newCalendarItemsNumber","port","postMessage","calendarItemsNumber","refreshRate","chrome","runtime","connect","name","page_elem","document","querySelector","createElement","id","className","get","extension","getURL","data","parseHTML","appendTo","menu_ul","on","e","stopPropagation","ready","updateQuakeChat","removeClass","addClass","twitchStream","after","remove","updateTwitchChat","css","append","preventDefault","updateRefreshTimerValue","serializeArray","updateScheduleItemsValue","click","that","setTimeout","bootstrapSwitch","event","state","before","onMessage","addListener","status","calendar"],"mappings":"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","file":"scripts/contentscript.js","sourcesContent":["'use strict';\n\n// Timer Variables\n\nvar refreshTimer = null;\nvar refreshRate = 300000;\n\nvar port = chrome.runtime.connect({ name: \"gdq\" });\n\nvar page_elem = document.querySelector('body');\nconsole.log(page_elem);\n\nvar runners_paragraph = document.createElement('p');\nvar game_link_a = document.createElement('a');\n\nrunners_paragraph.id = \"gdq-runners-information\";\ngame_link_a.id = \"gdq-speedrun-link\";\ngame_link_a.className = \"speedrun-link\";\n\n$.get(chrome.extension.getURL('/html/gdq-footer.html'), function (data) {\n    $($.parseHTML(data)).appendTo(page_elem);\n});\n\n$.get(chrome.extension.getURL('/html/settings-menu.html'), function (data) {\n    var menu_ul = $(\".settings-menu\");\n    $($.parseHTML(data)).appendTo(menu_ul);\n});\n\n$(page_elem).on('click', 'ul.dropdown-menu', function (e) {\n    e.stopPropagation();\n});\n\n$(document).ready(function () {\n    $(page_elem).css('margin-bottom', '70px');\n    $('#stream').html('<iframe src=\"https://player.twitch.tv/?channel=gamesdonequick\" width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"no\" allowFullscreen=\"true\" class=\"center-block\"></iframe>');\n    $('#stream').css('margin-top', '24px');\n    $('.game-information').append(game_link_a);\n    $('.game-information').append(runners_paragraph);\n\n    $(\"#refresh-timer-update\").on('submit', function (e) {\n        e.preventDefault();\n\n        var updateRefreshTimerValue = $('#refresh-timer-update').serializeArray()[0][\"value\"];\n\n        updateRefreshRate(updateRefreshTimerValue);\n\n        return false;\n    });\n\n    $(\"#schedule-items-update\").on('submit', function (e) {\n        e.preventDefault();\n\n        var updateScheduleItemsValue = $('#schedule-items-update').serializeArray()[0][\"value\"];\n\n        console.log(updateScheduleItemsValue);\n        sendUpdateCalendarItemsNumber(updateScheduleItemsValue);\n\n        return false;\n    });\n\n    $(\".fa.fa-refresh\").click(function () {\n        this.className = 'fa fa-refresh fa-spin';\n        console.log(\"Refreshing...\");\n        requestDataFromBackground();\n        var that = this;\n        setTimeout(function () {\n            that.className = 'fa fa-refresh';\n            console.log(\"Refresh complete.\");\n        }, 2000);\n    });\n\n    $(\".fa.fa-cog\").click(function () {\n        this.className = 'fa fa-cog fa-spin';\n        var that = this;\n        setTimeout(function () {\n            that.className = 'fa fa-cog';\n        }, 2000);\n    });\n\n    $(\"[name='quakenet-chat-switch']\").bootstrapSwitch();\n    $(\"[name='twitch-chat-switch']\").bootstrapSwitch();\n    $(\"[name='theater-mode']\").bootstrapSwitch();\n\n    $('input[name=\"theater-mode\"]').on('switchChange.bootstrapSwitch', function (event, state) {\n        if ($('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state')) {\n            updateQuakeChat('remove');\n            $('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state', false, true);\n        }\n\n        if ($('input[name=\"theater-mode\"]').bootstrapSwitch('state')) {\n            $('#stream').html('');\n            $.get(chrome.extension.getURL('/html/quakenet-theater-mode.html'), function (data) {\n                console.log(\"Adding theater mode!\");\n                console.log($.parseHTML(data));\n                $('#battlescene').before($.parseHTML(data));\n            });\n        } else {\n            $('#theater-mode-div').remove();\n            $('#stream').html('<iframe src=\"https://player.twitch.tv/?channel=gamesdonequick\" width=\"100%\" height=\"100%\" frameborder=\"0\" scrolling=\"no\" allowFullscreen=\"true\" class=\"center-block\"></iframe>');\n        }\n    });\n\n    $('input[name=\"quakenet-chat-switch\"]').on('switchChange.bootstrapSwitch', function (event, state) {\n        console.log('Clicked QUAKENET Switch.');\n        console.log(this);\n        console.log(\"Twitch State:\");\n        console.log($('input[name=\"twitch-chat-switch\"]').bootstrapSwitch('state'));\n        console.log(\"Quake State:\");\n        console.log($('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state'));\n\n        if ($('input[name=\"twitch-chat-switch\"]').bootstrapSwitch('state')) {\n            updateTwitchChat('remove');\n            $('input[name=\"twitch-chat-switch\"]').bootstrapSwitch('state', false, true);\n            if ($('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state')) {\n                updateQuakeChat('add');\n            } else {\n                updateQuakeChat('remove');\n            }\n        } else {\n            console.log();\n            if ($('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state')) {\n                updateQuakeChat('add');\n            } else {\n                updateQuakeChat('remove');\n            }\n        }\n    });\n\n    $('input[name=\"twitch-chat-switch\"]').on('switchChange.bootstrapSwitch', function (event, state) {\n        console.log('Clicked Twitch Switch.');\n        if ($('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state')) {\n            updateQuakeChat('remove');\n            $('input[name=\"quakenet-chat-switch\"]').bootstrapSwitch('state', false, true);\n            if ($('input[name=\"twitch-chat-switch\"]').bootstrapSwitch('state')) {\n                updateTwitchChat('add');\n            } else {\n                updateTwitchChat('remove');\n            }\n        } else {\n            if ($('input[name=\"twitch-chat-switch\"]').bootstrapSwitch('state')) {\n                updateTwitchChat('add');\n            } else {\n                updateTwitchChat('remove');\n            }\n        }\n    });\n\n    function updateQuakeChat(msg) {\n        if (msg == 'add') {\n            console.log('Switch is on. Adding Chat iframe and modifying UI.');\n            $('#stream').removeClass('center-block').addClass('pull-left');\n            $.get(chrome.extension.getURL('/html/quakenet-chat.html'), function (data) {\n                var twitchStream = $(\"#stream\");\n                $(twitchStream).after($.parseHTML(data));\n            });\n        } else if (msg == 'remove') {\n            console.log('Switch is off. Removing UI.');\n            $('#stream').addClass('center-block').removeClass('pull-left');\n            $('#quakenet-chat').remove();\n            $('#quakenet-clear').remove();\n        }\n    }\n\n    function updateTwitchChat(msg) {\n        if (msg == 'add') {\n            console.log('Switch is on. Adding Chat iframe and modifying UI.');\n            $('#stream').removeClass('center-block').addClass('pull-left');\n            $.get(chrome.extension.getURL('/html/twitch-chat.html'), function (data) {\n                var twitchStream = $(\"#stream\");\n                $(twitchStream).after($.parseHTML(data));\n            });\n        } else if (msg == 'remove') {\n            console.log('Switch is off. Removing UI.');\n            $('#stream').addClass('center-block').removeClass('pull-left');\n            $('#twitch-chat').remove();\n            $('#twitch-clear').remove();\n        }\n    }\n});\n\n//Port Listeners\n\nvar port = chrome.runtime.connect({ name: \"gdq\" });\nport.postMessage({ message: \"request\" });\nport.onMessage.addListener(function (msg) {\n    if (msg.status == \"changed\") {\n        console.log(msg);\n        console.log(\"The Current Game is: \" + msg.game);\n        updateUI(msg);\n        updateCalendarUI(msg.calendar);\n    } else if (msg.status == \"unchanged\") {\n        console.log(\"Current game has not changed since last request\");\n    } else if (msg.status == \"reload\") {\n        console.log(\"Reload has occurred\");\n        console.log(msg);\n        console.log(\"The Current Game is: \" + msg.game);\n        updateUI(msg);\n        updateCalendarUI(msg.calendar);\n    }\n});\n\n/*\n  Object\n    Game\n    Runner\n    Estimate\n    Category\n    Link\n*/\n\nfunction updateUI(msg) {\n    runners_paragraph.innerHTML = generateFormattedRunnerString(msg.runner);\n    game_link_a.href = msg.link;\n    game_link_a.onclick = function () {\n        window.open(this.href);\n        return false;\n    };\n\n    if (msg.category != null) {\n        game_link_a.innerHTML = msg.game + ' (' + msg.category + ')';\n    } else {\n        game_link_a.innerHTML = msg.game;\n    }\n}\n\nfunction updateCalendarUI(msg) {\n    console.log(\"Calendar updating...\");\n    console.log(msg);\n    if (msg != null) {\n        $('#schedule-table tbody').empty();\n\n        var scheduleString = \"\";\n        _.each(msg.order, function (gameTitle, index) {\n            scheduleString += generateScheduleItemString(msg.schedule[gameTitle], index + 1);\n        });\n\n        $('#schedule-table tbody').html(scheduleString);\n        console.log(\"Calendar updated.\");\n    } else {\n        return;\n    }\n}\n\nfunction generateFormattedRunnerString(runners) {\n    var runners_keys = _.keys(runners);\n    var runner_string = \"by \";\n    if (runners_keys.length > 2) {\n        var last_runner = runners_keys.pop();\n        var second_runner = runners_keys.pop();\n        $.each(runners_keys, function (index, runner_key) {\n            runner_string += generateRunnerElement(runners, runner_key) + ', ';\n        });\n\n        runner_string += generateRunnerElement(runners, second_runner) + ' ';\n        runner_string += 'and ';\n        runner_string += generateRunnerElement(runners, last_runner);\n    } else if (runners_keys.length == 2) {\n        var last_runner = runners_keys.pop();\n        var second_runner = runners_keys.pop();\n\n        runner_string += generateRunnerElement(runners, second_runner);\n        runner_string += ' and ';\n        runner_string += generateRunnerElement(runners, last_runner);\n    } else if (runners_keys.length == 1) {\n        var runner_key = runners_keys[0];\n        runner_string += generateRunnerElement(runners, runners_keys[0]);\n    } else {\n        console.log(\"Error no runners.\");\n        runner_string = \"\";\n    }\n    return runner_string;\n}\n\nfunction generateRunnerElement(runnerObject, runner_key) {\n    if (runnerObject[runner_key][\"logo\"] == null) {\n        return '<a href=\"' + runnerObject[runner_key][\"link\"] + '\" onclick=\"window.open(this.href); return false;\">' + runner_key + '</a>';\n    } else {\n        return '<a href=\"' + runnerObject[runner_key][\"link\"] + '\" onclick=\"window.open(this.href); return false;\"><img class=\"runner-logo\" src=\"' + runnerObject[runner_key][\"logo\"] + '\" />' + runner_key + '</a>';\n    }\n}\n\nfunction generateScheduleItemString(scheduleItemObject, index) {\n    var runnerString = generateFormattedRunnerString(scheduleItemObject.runner);\n    if (scheduleItemObject.category != null) {\n        var titleString = scheduleItemObject.title + ' (' + scheduleItemObject.category + ')';\n    } else {\n        var titleString = scheduleItemObject.title;\n    }\n\n    var scheduleItemString = '<tr>\\n                                <th scope=\"row\">' + index + '</th>\\n                                <td>\\n                                    <a class=\"speedrun-link\" id=\"next-game-title\" href=\"' + scheduleItemObject.link + '\" onclick=\"window.open(this.href); return false;\"> ' + titleString + '</a>\\n                                    <p class=\"runners-links\" id=\"next-runners-information\">' + runnerString + '</p>\\n                                </td>\\n                                <td style=\"width: 114px;\">\\n                                    <p class=\"text-right\"><i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i> ' + scheduleItemObject.estimate + '</p>\\n                                </td>\\n                              </tr>';\n\n    return scheduleItemString;\n}\n\nfunction calculateRefreshRate(minutes) {\n    // body...\n    var milliseconds = minutes * 60000;\n\n    return milliseconds;\n}\n\nfunction updateRefreshRate(newRate) {\n    if (newRate == \"Set Refresh Timer:\") {\n        console.log(\"No change in refresh timer value.\");\n\n        $.notify({\n            icon: 'glyphicon glyphicon-warning-sign',\n            title: 'Refresh Timer Update:',\n            message: 'Please choose an option from the menu!'\n        }, {\n            // settings\n            element: 'body',\n            position: null,\n            type: \"danger\",\n            allow_dismiss: true,\n            newest_on_top: true,\n            showProgressbar: false,\n            placement: {\n                from: \"top\",\n                align: \"right\"\n            }\n        });\n\n        return;\n    } else if (typeof parseInt(newRate) == \"number\" && parseInt(newRate) > 0) {\n        clearInterval(refreshTimer);\n        var milliseconds = calculateRefreshRate(parseInt(newRate));\n        setInterval(requestDataFromBackground, milliseconds);\n        console.log(\"Refresh Timer has been updated to: \" + newRate + \" minutes or \" + milliseconds + \" milliseconds\");\n\n        $.notify({\n            icon: 'glyphicon glyphicon-time',\n            title: 'Refresh Timer Update:',\n            message: 'Updated to refresh every ' + newRate + ' minutes'\n        }, {\n            // settings\n            element: 'body',\n            position: null,\n            type: \"success\",\n            allow_dismiss: true,\n            newest_on_top: true,\n            showProgressbar: false,\n            placement: {\n                from: \"top\",\n                align: \"right\"\n            }\n        });\n    }\n}\n\nfunction sendUpdateCalendarItemsNumber(newCalendarItemsNumber) {\n    if (newCalendarItemsNumber == \"Set # of Runs to Display:\") {\n        console.log(\"No change in numbers of runs to display in schedule.\");\n\n        $.notify({\n            icon: 'glyphicon glyphicon-warning-sign',\n            title: 'Schedule Items Update',\n            message: 'Please choose an option from the menu!'\n        }, {\n            // settings\n            element: 'body',\n            position: null,\n            type: \"danger\",\n            allow_dismiss: true,\n            newest_on_top: true,\n            showProgressbar: false,\n            placement: {\n                from: \"top\",\n                align: \"right\"\n            }\n        });\n\n        return;\n    } else if (typeof parseInt(newCalendarItemsNumber) == \"number\" && parseInt(newCalendarItemsNumber) > 0) {\n        port.postMessage({ message: \"schedule\", calendarItemsNumber: parseInt(newCalendarItemsNumber) });\n\n        $.notify({\n            icon: 'glyphicon glyphicon-time',\n            title: 'Schedule Items Update:',\n            message: 'Updated to display ' + newCalendarItemsNumber + ' runs.'\n        }, {\n            // settings\n            element: 'body',\n            position: null,\n            type: \"success\",\n            allow_dismiss: true,\n            newest_on_top: true,\n            showProgressbar: false,\n            placement: {\n                from: \"top\",\n                align: \"right\"\n            }\n        });\n    }\n}\n\nfunction requestDataFromBackground() {\n    port.postMessage({ message: \"request\" });\n}\nrefreshTimer = setInterval(requestDataFromBackground, refreshRate);"],"sourceRoot":"/source/"}